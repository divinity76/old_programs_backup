function onUse(cid, item, frompos, item2, topos) if getPlayerMagLevel(cid) >= 4 then ipos = {x=topos.x, y=topos.y, z=topos.z, stackpos=255} geti = getThingfromPos(ipos) if geti.itemid > 0 then if getTilePzInfo(topos) == 0 then doSendMagicEffect(topos,2) doRemoveItem(geti.uid,1) if item.type > 1 then doChangeTypeItem(item.uid,item.type-1) else doRemoveItem(item.uid,1) end else doSendMagicEffect(frompos,2) doPlayerSendCancel(cid,"Sorry not possible. You cannot use this rune in protection zone.") end else doSendMagicEffect(frompos,2) return 0 end else doSendMagicEffect(frompos,2) doPlayerSendCancel(cid,"You don't have the required magic level to use this rune.") end return 1 end
